<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10/5 - LINH QU·∫∫ CH·∫§N ƒê·ªòNG</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { --gold: #ffd700; --red: #a4161a; --paper: #fff5e6; }
        body { margin: 0; background: #1a0f00; font-family: 'Segoe UI', sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; overflow: hidden; color: white; }
        .container { width: 90%; max-width: 400px; text-align: center; }
        .wood-panel { background: var(--paper); color: #333; padding: 30px 20px; border-radius: 25px; border: 8px double #8b5e34; box-shadow: 0 0 50px rgba(0,0,0,0.8); }
        h1 { color: var(--red); font-size: 24px; text-transform: uppercase; margin: 10px 0; }
        input[type="date"] { width: 80%; padding: 15px; border-radius: 15px; border: 3px solid #8b5e34; font-size: 20px; font-weight: bold; margin: 20px 0; }
        .btn-gieo { background: var(--red); color: white; border: none; padding: 18px; border-radius: 50px; font-weight: bold; width: 100%; cursor: pointer; font-size: 20px; box-shadow: 0 6px 0 #5f0f11; }
        .btn-gieo:active { transform: translateY(3px); box-shadow: 0 3px 0 #5f0f11; }
        
        #ong-que { font-size: 100px; display: none; margin: 20px 0; }
        .shaking { animation: shake 0.1s infinite; }
        @keyframes shake { 0% { transform: translate(2px, 2px) rotate(5deg); } 50% { transform: translate(-2px, -2px) rotate(-5deg); } 100% { transform: translate(2px, 2px) rotate(5deg); } }

        .spread { display: none; position: relative; height: 300px; margin-top: 10px; }
        .que { width: 45px; height: 210px; background: linear-gradient(to bottom, #f3d5b5, #e7bc91); border-radius: 25px 25px 5px 5px; border: 1px solid #bc8a5f; position: absolute; left: 50%; bottom: 20px; margin-left: -22.5px; transform-origin: bottom center; transition: 0.4s; display: flex; align-items: center; justify-content: center; writing-mode: vertical-rl; font-weight: bold; color: #8b5e34; box-shadow: 2px 5px 10px rgba(0,0,0,0.3); }
        .que.selected { transform: translateY(-120px) scale(1.3) rotate(0deg) !important; z-index: 100; background: var(--gold); color: var(--red); border: 3px solid var(--red); }

        .modal { display: none; position: fixed; inset: 0; z-index: 999; background: rgba(0,0,0,0.9); justify-content: center; align-items: center; padding: 20px; }
        .result-card { background: var(--paper); color: #222; padding: 30px 20px; border-radius: 20px; border: 10px double #8b5e34; text-align: center; width: 100%; max-width: 320px; position: relative; }
        .res-title { font-size: 28px; font-weight: 900; color: var(--red); }
        
        .rain { position: fixed; inset: 0; pointer-events: none; display: none; z-index: 1001; }
        .drop { position: absolute; background: #fff; width: 1px; height: 15px; opacity: 0.4; animation: fall 0.4s linear infinite; }
        @keyframes fall { to { transform: translateY(100vh); } }
    </style>
</head>
<body>
    <div class="rain" id="rain-effect"></div>
    <div class="container" id="app">
        <div class="wood-panel" id="ui-input">
            <div style="background:var(--red); color:white; padding:5px; border-radius:10px; font-size:12px; margin-bottom:10px;">üëë 10/5 CHAMPION EDITION</div>
            <h1>XIN QU·∫∫ LINH ·ª®NG</h1>
            <input type="date" id="dob">
            <button class="btn-gieo" onclick="startAction()">XIN QU·∫∫ NGAY</button>
        </div>
        <div id="ong-que">üè∫</div>
        <div class="spread" id="ui-spread"></div>
    </div>

    <div class="modal" id="ui-modal">
        <div class="result-card">
            <div id="status-icon" style="font-size: 50px;">üèÜ</div>
            <div id="res-title" class="res-title"></div>
            <p id="res-desc" style="font-weight: 600; font-size: 18px; color: #333;"></p>
            <div id="ui-gift" style="display:none; background:#ffd700; color:red; padding:10px; border-radius:10px; font-weight:bold; margin: 10px 0; border: 2px dashed red;">üéÅ NH·∫¨N M√ìC KH√ìA NGAY!</div>
            <button class="btn-gieo" onclick="location.reload()" style="background:#555; box-shadow:0 5px 0 #222; font-size:16px;">GIEO L·∫†I (TEST)</button>
        </div>
    </div>

<script>
    // √Çm thanh ch·∫•t l∆∞·ª£ng cao
    const sndShake = new Audio('https://www.soundjay.com/misc/sounds/shaking-ice-in-cup-1.mp3');
    const sndSuccess = new Audio('https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3'); // Ti·∫øng k√®n th·∫Øng
    const sndSad = new Audio('https://www.myinstants.com/media/sounds/ytpmv-sad-violin.mp3'); // Nh·∫°c bu·ªìn l√©m l·ªânh

    const fortunes = [
        {t: "V·∫¨N MAY KI·∫æN T·∫†O", d: "V·∫≠n may c·ªßa b·∫°n ƒëang 'on top' nh∆∞ ƒë·ªôi B√≥ng Chuy·ªÅn 10/5 v·ª´a h·ªët V√î ƒê·ªäCH v·∫≠y ƒë√≥!", gift: true, type: 'good'},
        {t: "C·∫®N TR·ªåNG KH·∫®U THI·ªÜT", d: "B·ªõt s√¢n si l·∫°i n√≠ ∆°i. H√£y h·ªçc c√°ch gi·ªØ h·∫°ng Nh√¨ ƒë·∫ßy ki√™u h√£nh nh∆∞ ƒë·ªôi b√≥ng ƒë√° l·ªõp m√¨nh nh√©!", gift: false, type: 'bad'},
        {t: "GI√ÄU NGANG NG∆Ø·ª¢C", d: "Ti·ªÅn v√†o nh∆∞ n∆∞·ªõc, ƒë·ªß s·ª©c bao tr·ªçn n∆∞·ªõc u·ªëng cho d√†n nh√† v√¥ ƒë·ªãch 10/5 lu√¥n!", gift: false, type: 'good'},
        {t: "B·∫¨C TH·∫¶Y FLEXING", d: "S·∫Øp c√≥ th√†nh t√≠ch ch·∫•n ƒë·ªông, y h·ªát c√°i c√∫p V√¥ ƒê·ªãch B√≥ng Chuy·ªÅn ƒëang n·∫±m trong tay 10/5!", gift: false, type: 'good'},
        {t: "TU T√ÇM D∆Ø·ª†NG T√çNH", d: "H√£y tu d∆∞·ª°ng ƒë·ªÉ ƒë·∫πp trai xinh g√°i nh∆∞ d√†n v·∫≠n ƒë·ªông vi√™n 10/5 ƒëi n√†o!", gift: false, type: 'bad'},
        {t: "S·ªê H∆Ø·ªûNG V√î TH·ª∞C", d: "Qu√Ω nh√¢n s·∫Øp bao ƒÉn ch∆°i, l·∫π l·∫π theo ch√¢n d√†n hot boy 10/5 h√≥ng l·ªôc nh√©!", gift: true, type: 'good'}
    ];

    function startAction() {
        if(!document.getElementById('dob').value) return alert("Nh·∫≠p ng√†y sinh m·ªõi linh!");
        
        // Rung khi b·∫Øt ƒë·∫ßu l·∫Øc
        if(navigator.vibrate) navigator.vibrate(200);
        sndShake.play();

        document.getElementById('ui-input').style.display = 'none';
        const ong = document.getElementById('ong-que');
        ong.style.display = 'block'; ong.classList.add('shaking');
        
        setTimeout(() => {
            ong.style.display = 'none';
            showFan();
        }, 2200);
    }

    function showFan() {
        const spread = document.getElementById('ui-spread');
        spread.innerHTML = ''; spread.style.display = 'block';
        for(let i=0; i<6; i++) {
            const s = document.createElement('div'); s.className = 'que'; s.innerHTML = "QU·∫∫ 10/5";
            s.onclick = function() { selectQue(this); };
            spread.appendChild(s);
            setTimeout(() => { s.style.transform = `rotate(${(i-2.5)*20}deg) translateX(${(i-2.5)*10}px)`; }, i*100);
        }
    }

    function selectQue(el) {
        if(navigator.vibrate) navigator.vibrate(50);
        el.classList.add('selected');
        const dob = document.getElementById('dob').value.replace(/-/g, "");
        let sum = 0; for(let n of dob) sum += parseInt(n);
        const res = fortunes[sum % fortunes.length];
        setTimeout(() => renderResult(res), 800);
    }

    function renderResult(res) {
        if(res.type === 'good') {
            sndSuccess.play();
            if(navigator.vibrate) navigator.vibrate([200, 100, 200, 100, 400]); // Rung t∆∞ng b·ª´ng
            document.getElementById('status-icon').innerText = "üèÜ";
            
            var end = Date.now() + 4000;
            (function frame() {
                confetti({ particleCount: 7, angle: 60, spread: 55, origin: { x: 0 }, colors: ['#ff0000', '#ffd700'] });
                confetti({ particleCount: 7, angle: 120, spread: 55, origin: { x: 1 }, colors: ['#ff0000', '#ffd700'] });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());
        } else {
            sndSad.play();
            if(navigator.vibrate) navigator.vibrate(500); // Rung m·ªôt c√°i d√†i bu·ªìn b√£
            document.getElementById('rain-effect').style.display = 'block';
            document.getElementById('status-icon').innerText = "‚õàÔ∏è";
            for(let i=0; i<40; i++) {
                let d = document.createElement('div'); d.className = 'drop';
                d.style.left = Math.random()*100+'vw'; d.style.animationDuration = Math.random()*0.5+0.3+'s';
                document.getElementById('rain-effect').appendChild(d);
            }
        }
        document.getElementById('res-title').innerText = res.t;
        document.getElementById('res-desc').innerText = res.d;
        document.getElementById('ui-gift').style.display = res.gift ? 'block' : 'none';
        document.getElementById('ui-modal').style.display = 'flex';
    }
</script>
</body>
</html>
